@model AdmissionSystem.Web.Areas.Admission.Models.SectionMasterModel
@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Dashboard.cshtml";
}

<section class="content">
    <div class="row">
        <!--Left Column -->
        <div class="col-md-12">
            <!-- general form elements -->
            <div class="box box-primary">
                <div class="box-header width-border">
                    <h3 class="box-title">Section Master</h3>
                </div>
                <!--/.box-header-->
                <!--form start-->
                @using (Html.BeginForm("Create", "SectionMaster", new { area = "Admission" }, FormMethod.Post))
                {
                    @Html.AntiForgeryToken()
            <div class="box-body">
                <div class="form-group">
                    <label>Select Course Name:</label>
                    @Html.DropDownList("CourseId", ViewBag.CourseId as SelectList, "--Select Course--", new{ @class = "form-control", style = "width: 1090px; height: 40px;", onchange = "populateClassDropdown()"})
                    @Html.ValidationMessageFor(m => m.CourseId, "", new { @class = "text-danger" })
                </div>
                <div class="form-group">
                    <label>Select Class Name:</label>
                    @Html.DropDownList("ClassId", ViewBag.ClassId as SelectList, "--Select Class--", new{ @class = "form-control",style = "width: 1090px; height: 40px;",})
                    @Html.ValidationMessageFor(m => m.ClassId, "", new { @class = "text-danger" })
                </div>
                <div class="form-group">
                    <label>Section Name:</label>
                    @Html.EditorFor(m => m.SectionName, new { htmlAttributes = new { @placeholder = "Enter Section Name", style = "width: 1090px; height: 40px;" } })
                    @Html.ValidationMessageFor(m => m.SectionName, "", new { @class = "text-danger" })
                </div>
            </div>
                    <!--/.Box-body-->
                    <div class="box-footer">
                        <button type="submit" class="btn btn-primary">Save</button>
                        <a href="@Url.Action("Index", "SectionMaster", new { area = "Admission"})" class="btn bg-maroon margin">Back To List</a>
                    </div>
                }
            </div>
        </div>
    </div>
</section>

<script>
    function populateClassDropdown() {
        var courseId = $('#CourseId').val();
        var allClasses = @Html.Raw(Json.Encode(ViewBag.AllClasses));
        var filteredClasses = allClasses.filter(function (cls) {
            return cls.CourseId == courseId;
        });
        var classDropdown = $("#ClassId");
        classDropdown.empty(); // Clear existing options
        classDropdown.append($('<option>').text("--Select Class--").val(""));
        $.each(filteredClasses, function (index, item) {
            classDropdown.append($('<option>').text(item.Text).val(item.Value));
        });
    }

    // Call populateClassDropdown function on page load if a course is already selected
    $(document).ready(function () {
        populateClassDropdown();
    });
</script>



